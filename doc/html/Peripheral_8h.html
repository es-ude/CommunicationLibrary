<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: /home/luk/Work/CommunicationModule/include/Peripheral.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Peripheral.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &quot;include/Callback.h&quot;</code><br />
</div>
<p><a href="Peripheral_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPeripheralInterface__NonBlockingWriteContext.html">PeripheralInterface_NonBlockingWriteContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPeripheralInterface__NonBlockingReadContext.html">PeripheralInterface_NonBlockingReadContext</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aba6ae712484bcf7245a5930d48f3d8ac"><td class="memItemLeft" align="right" valign="top"><a id="aba6ae712484bcf7245a5930d48f3d8ac"></a>
typedef void&#160;</td><td class="memItemRight" valign="bottom"><b>Peripheral</b></td></tr>
<tr class="separator:aba6ae712484bcf7245a5930d48f3d8ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adff5bcdbb5a8192e386b3f1ab7b78966"><td class="memItemLeft" align="right" valign="top"><a id="adff5bcdbb5a8192e386b3f1ab7b78966"></a>
typedef struct PeripheralInterface *&#160;</td><td class="memItemRight" valign="bottom"><b>PeripheralInterface</b></td></tr>
<tr class="separator:adff5bcdbb5a8192e386b3f1ab7b78966"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66ec6d7e39eed19a8351ca424c478ef"><td class="memItemLeft" align="right" valign="top"><a id="ae66ec6d7e39eed19a8351ca424c478ef"></a>
typedef <a class="el" href="structCommunicationModule__Callback.html">CommunicationModule_Callback</a>&#160;</td><td class="memItemRight" valign="bottom"><b>PeripheralInterface_Callback</b></td></tr>
<tr class="separator:ae66ec6d7e39eed19a8351ca424c478ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66ff1b23b5749568c2a2d4e3ef608569"><td class="memItemLeft" align="right" valign="top"><a id="a66ff1b23b5749568c2a2d4e3ef608569"></a>
typedef struct <a class="el" href="structPeripheralInterface__NonBlockingWriteContext.html">PeripheralInterface_NonBlockingWriteContext</a>&#160;</td><td class="memItemRight" valign="bottom"><b>PeripheralInterface_NonBlockingWriteContext</b></td></tr>
<tr class="separator:a66ff1b23b5749568c2a2d4e3ef608569"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a815c6e1b7dff2b9a835c67094c9ff4f3"><td class="memItemLeft" align="right" valign="top"><a id="a815c6e1b7dff2b9a835c67094c9ff4f3"></a>
typedef struct <a class="el" href="structPeripheralInterface__NonBlockingReadContext.html">PeripheralInterface_NonBlockingReadContext</a>&#160;</td><td class="memItemRight" valign="bottom"><b>PeripheralInterface_NonBlockingReadContext</b></td></tr>
<tr class="separator:a815c6e1b7dff2b9a835c67094c9ff4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1f3fee7083b2ff6750c2dfdea5d783bd"><td class="memItemLeft" align="right" valign="top"><a id="a1f3fee7083b2ff6750c2dfdea5d783bd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>PeripheralInterface_writeBlocking</b> (PeripheralInterface self, const uint8_t *buffer, size_t size)</td></tr>
<tr class="separator:a1f3fee7083b2ff6750c2dfdea5d783bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c720a11f3a9148eafd58ed2eb01341"><td class="memItemLeft" align="right" valign="top"><a id="ae6c720a11f3a9148eafd58ed2eb01341"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>PeripheralInterface_writeNonBlocking</b> (PeripheralInterface self, <a class="el" href="structPeripheralInterface__NonBlockingWriteContext.html">PeripheralInterface_NonBlockingWriteContext</a> context)</td></tr>
<tr class="separator:ae6c720a11f3a9148eafd58ed2eb01341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bdbd9939f409fecd997ba2af3434228"><td class="memItemLeft" align="right" valign="top"><a id="a9bdbd9939f409fecd997ba2af3434228"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>PeripheralInterface_readBlocking</b> (PeripheralInterface self, uint8_t *buffer, size_t length)</td></tr>
<tr class="separator:a9bdbd9939f409fecd997ba2af3434228"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a715a0f78cb8e87af9b3f25b6076b2733"><td class="memItemLeft" align="right" valign="top"><a id="a715a0f78cb8e87af9b3f25b6076b2733"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>PeripheralInterface_readNonBlocking</b> (PeripheralInterface self, uint8_t *buffer, uint16_t size)</td></tr>
<tr class="separator:a715a0f78cb8e87af9b3f25b6076b2733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1453c3ba3bbbde20994903debacbd921"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Peripheral_8h.html#a1453c3ba3bbbde20994903debacbd921">PeripheralInterface_selectPeripheral</a> (PeripheralInterface self, Peripheral *device)</td></tr>
<tr class="separator:a1453c3ba3bbbde20994903debacbd921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22fdb8b9d9f6706fc6349259817b7fd2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Peripheral_8h.html#a22fdb8b9d9f6706fc6349259817b7fd2">PeripheralInterface_deselectPeripheral</a> (PeripheralInterface self, Peripheral *device)</td></tr>
<tr class="separator:a22fdb8b9d9f6706fc6349259817b7fd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02c3b4d571aa58dfd5c56f8c1a8fcc8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Peripheral_8h.html#a02c3b4d571aa58dfd5c56f8c1a8fcc8f">PeripheralInterface_handleWriteInterrupt</a> (PeripheralInterface self)</td></tr>
<tr class="separator:a02c3b4d571aa58dfd5c56f8c1a8fcc8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a599d7d3e9e7a59a148a47d3e3a95ebdb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="Peripheral_8h.html#a599d7d3e9e7a59a148a47d3e3a95ebdb">PeripheralInterface_handleReadInterrupt</a> (PeripheralInterface self)</td></tr>
<tr class="separator:a599d7d3e9e7a59a148a47d3e3a95ebdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The PeripheralInterface provides a software interface for different peripheral interface drivers (USART, SPI). The following example illustrates writing a string to a peripheral device, the initialization of the Peripheral struct (software representation of the peripheral device you want to interact with) and the PeripheralInterface itself are documented in the header file corresponding to their implementation: </p><div class="fragment"><div class="line">uint8_t <span class="keywordtype">string</span>[] = <span class="stringliteral">&quot;hello, world!&quot;</span>;</div><div class="line"><a class="code" href="Peripheral_8h.html#a1453c3ba3bbbde20994903debacbd921">PeripheralInterface_selectPeripheral</a>(interface, peripheral);</div><div class="line">PeripheralInterface_writeBlocking(interface, <span class="keywordtype">string</span>, strlen(<span class="keywordtype">string</span>));</div><div class="line"><a class="code" href="Peripheral_8h.html#a22fdb8b9d9f6706fc6349259817b7fd2">PeripheralInterface_deselectPeripheral</a>(interface, peripheral);</div></div><!-- fragment --><p>For now the support for non blocking io is not fully implemented. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a22fdb8b9d9f6706fc6349259817b7fd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22fdb8b9d9f6706fc6349259817b7fd2">&#9670;&nbsp;</a></span>PeripheralInterface_deselectPeripheral()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeripheralInterface_deselectPeripheral </td>
          <td>(</td>
          <td class="paramtype">PeripheralInterface&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Peripheral *&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unlocks the PeripheralInterface ADT and performs clean up steps where necessary, e.g. disabling slave select lines for SPI. </p>

</div>
</div>
<a id="a599d7d3e9e7a59a148a47d3e3a95ebdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a599d7d3e9e7a59a148a47d3e3a95ebdb">&#9670;&nbsp;</a></span>PeripheralInterface_handleReadInterrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeripheralInterface_handleReadInterrupt </td>
          <td>(</td>
          <td class="paramtype">PeripheralInterface&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use this function inside the interrupt service routine, triggering when a read operation was completed, to allow for non blocking read operations. </p>

</div>
</div>
<a id="a02c3b4d571aa58dfd5c56f8c1a8fcc8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02c3b4d571aa58dfd5c56f8c1a8fcc8f">&#9670;&nbsp;</a></span>PeripheralInterface_handleWriteInterrupt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeripheralInterface_handleWriteInterrupt </td>
          <td>(</td>
          <td class="paramtype">PeripheralInterface&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use this function inside the interrupt service routine, triggering when a write operation was completed, to allow for non blocking write operations. </p>

</div>
</div>
<a id="a1453c3ba3bbbde20994903debacbd921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1453c3ba3bbbde20994903debacbd921">&#9670;&nbsp;</a></span>PeripheralInterface_selectPeripheral()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PeripheralInterface_selectPeripheral </td>
          <td>(</td>
          <td class="paramtype">PeripheralInterface&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Peripheral *&#160;</td>
          <td class="paramname"><em>device</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Runs the necessary setup steps to allow data transfers to the specified peripheral device. Make sure the specified peripheral matches the implementation used, otherwise behaviour is undefined. Additionally this locks the PeripheralInterface ADT for exclusive access. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
