<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: /home/luk/Work/CommunicationModule/include/PeripheralSPIImpl.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">PeripheralSPIImpl.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>SPI Implementation of the PeripheralInterface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="Peripheral_8h_source.html">include/Peripheral.h</a>&quot;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
</div>
<p><a href="PeripheralSPIImpl_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSPISlave.html">SPISlave</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structSPIConfig.html">SPIConfig</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a9d0892c7ea383464d226e2fd2e829130"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structSPISlave.html">SPISlave</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PeripheralSPIImpl_8h.html#a9d0892c7ea383464d226e2fd2e829130">SPISlave</a></td></tr>
<tr class="separator:a9d0892c7ea383464d226e2fd2e829130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dec1d6175dde82f7d668237ebaf5e8a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structSPIConfig.html">SPIConfig</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PeripheralSPIImpl_8h.html#a0dec1d6175dde82f7d668237ebaf5e8a">SPIConfig</a></td></tr>
<tr class="separator:a0dec1d6175dde82f7d668237ebaf5e8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a5486c45e535f2aaba01044ca55db9d3b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PeripheralSPIImpl_8h.html#a5486c45e535f2aaba01044ca55db9d3b">SPIControlRegisterParameters</a> { <br />
&#160;&#160;<b>SPI_DATA_ORDER_MSB_FIRST</b>, 
<b>SPI_DATA_ORDER_LSB_FIRST</b>, 
<b>SPI_CLOCK_RATE_DIVIDER_4</b>, 
<b>SPI_CLOCK_RATE_DIVIDER_8</b>, 
<br />
&#160;&#160;<b>SPI_CLOCK_RATE_DIVIDER_16</b>, 
<b>SPI_CLOCK_RATE_DIVIDER_32</b>, 
<b>SPI_CLOCK_RATE_DIVIDER_64</b>, 
<b>SPI_CLOCK_RATE_DIVIDER_128</b>, 
<br />
&#160;&#160;<b>SPI_MODE_0</b>, 
<b>SPI_MODE_1</b>, 
<b>SPI_MODE_2</b>, 
<b>SPI_MODE_3</b>, 
<br />
&#160;&#160;<b>SPI_IDLE_SIGNAL_LOW</b>, 
<b>SPI_IDLE_SIGNAL_HIGH</b>
<br />
 }</td></tr>
<tr class="separator:a5486c45e535f2aaba01044ca55db9d3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6ec819042ec3994cdd010d9c16df0d78"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PeripheralSPIImpl_8h.html#a6ec819042ec3994cdd010d9c16df0d78">PeripheralInterfaceSPI_getADTSize</a> (void)</td></tr>
<tr class="separator:a6ec819042ec3994cdd010d9c16df0d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ebc8569909486b133842da022a0f28"><td class="memItemLeft" align="right" valign="top">PeripheralInterface&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="PeripheralSPIImpl_8h.html#a62ebc8569909486b133842da022a0f28">PeripheralInterfaceSPI_createNew</a> (uint8_t *const memory, const <a class="el" href="structSPIConfig.html">SPIConfig</a> *const spiConfig)</td></tr>
<tr class="separator:a62ebc8569909486b133842da022a0f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SPI Implementation of the PeripheralInterface. </p>
<p>This header provides all declarations needed to initialize the driver for the SPI hardware implementation for the PeripheralInterface interface. The implementation is supposed to support all atmega platforms by just correctly defining the <a class="el" href="structSPIConfig.html">SPIConfig</a> and <a class="el" href="structSPISlave.html">SPISlave</a> data types. Here an example configuration for an atmega32u4 where the io pin for the connected slave is the fifth pin (we start counting at 0) on port B</p>
<div class="fragment"><div class="line"><a class="code" href="structSPISlave.html">SPISlave</a> mrf_spi_client = {</div><div class="line">    .<a class="code" href="structSPISlave.html#abbc4e8f0ccaa89da51ca0e4ff24ad7e9">data_register</a> = &amp;PORTB,</div><div class="line">    .data_direction_register = &amp;DDRB,</div><div class="line">    .select_chip_pin_number = 4,</div><div class="line">    .data_order = SPI_DATA_ORDER_MSB_FIRST,</div><div class="line">    .spi_mode = SPI_MODE_0,</div><div class="line">    .idle_signal = SPI_IDLE_SIGNAL_HIGH,</div><div class="line">    .clock_rate_divider = SPI_CLOCK_RATE_DIVIDER_64,</div><div class="line">};</div></div><!-- fragment --><p>And the configuration for the spi hardware interface on that platform after including <code>&lt;avr/io.h&gt;</code></p>
<div class="fragment"><div class="line"><a class="code" href="structSPIConfig.html">SPIConfig</a> spi_config = {</div><div class="line">  .data_register = &amp;SPDR,</div><div class="line">  .clock_pin = PORTB1,</div><div class="line">  .miso_pin = PORTB3,</div><div class="line">  .mosi_pin = PORTB2,</div><div class="line">  .slave_select_pin = PORTB0,</div><div class="line">  .io_lines_data_direction_register = &amp;DDRB,</div><div class="line">  .io_lines_data_register = &amp;PORTB,</div><div class="line">  .status_register = &amp;SPSR,</div><div class="line">  .control_register = &amp;SPCR,</div><div class="line">};</div></div><!-- fragment --> </div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a0dec1d6175dde82f7d668237ebaf5e8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dec1d6175dde82f7d668237ebaf5e8a">&#9670;&nbsp;</a></span>SPIConfig</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structSPIConfig.html">SPIConfig</a>  <a class="el" href="structSPIConfig.html">SPIConfig</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Configuration struct for the hardware spi interface. For information on how to set this up, look at the example above and your microcontrollers datasheet. </p>

</div>
</div>
<a id="a9d0892c7ea383464d226e2fd2e829130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d0892c7ea383464d226e2fd2e829130">&#9670;&nbsp;</a></span>SPISlave</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structSPISlave.html">SPISlave</a>  <a class="el" href="structSPISlave.html">SPISlave</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Software representation of the spi slave connected to the hosts spi hardware interface </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a5486c45e535f2aaba01044ca55db9d3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5486c45e535f2aaba01044ca55db9d3b">&#9670;&nbsp;</a></span>SPIControlRegisterParameters</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="PeripheralSPIImpl_8h.html#a5486c45e535f2aaba01044ca55db9d3b">SPIControlRegisterParameters</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>These values are used to configure the spi hardware interface</p>
<p>Values from a set of names sharing the same biggest possible prefix are mutually exclusive. E.g. you can obviously only use one single value for your clock rate divider. To find out which set of values you need to use for your use case, have look at the datasheet of the peripheral device you want to interact with. Choose a clock rate divider to match a supported clock rate of your peripheral device depending on the clock rate of your microcontroller. E.g. your peripheral device datasheet recommends a clock rate of 1 MHz and your microcontroller runs at 16MHz, so you choose SPI_CLOCK_RATE_DIVIDER_16. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a62ebc8569909486b133842da022a0f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62ebc8569909486b133842da022a0f28">&#9670;&nbsp;</a></span>PeripheralInterfaceSPI_createNew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PeripheralInterface PeripheralInterfaceSPI_createNew </td>
          <td>(</td>
          <td class="paramtype">uint8_t *const&#160;</td>
          <td class="paramname"><em>memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structSPIConfig.html">SPIConfig</a> *const&#160;</td>
          <td class="paramname"><em>spiConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The <a class="el" href="structSPIConfig.html">SPIConfig</a> struct handed over to this function needs be alive as long as you are using this PeripheralInterface. </p>

</div>
</div>
<a id="a6ec819042ec3994cdd010d9c16df0d78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ec819042ec3994cdd010d9c16df0d78">&#9670;&nbsp;</a></span>PeripheralInterfaceSPI_getADTSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t PeripheralInterfaceSPI_getADTSize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Use this to find out how much memory you need to provide to the create function.</p>
<dl class="section return"><dt>Returns</dt><dd>The size of the SPI implementation. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
